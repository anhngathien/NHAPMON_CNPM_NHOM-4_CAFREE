<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>CAFREE | Order</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
*{box-sizing:border-box}
body{
    margin:0;
    font-family:"Poppins",sans-serif;
    background:#f3f4f6;
}
.container{
    display:grid;
    grid-template-columns:240px 1fr 360px;
    height:100vh;
}

/* SIDEBAR */
.sidebar{
    background:linear-gradient(180deg,#6a11cb,#2575fc);
    color:white;
    padding:20px;
}
.sidebar h2{text-align:center;margin-bottom:30px}
.sidebar button{
    width:100%;
    padding:12px;
    margin-bottom:12px;
    border:none;
    border-radius:14px;
    background:rgba(255,255,255,0.2);
    color:white;
    cursor:pointer;
}

/* MENU */
.menu{
    padding:20px;
    overflow:auto;
}
.menu-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:16px;
}

/* DANH SÁCH BÀN (THAY TÌM MÓN) */
.table-bar{
    display:flex;
    gap:10px;
}
.table-bar button{
    padding:10px 16px;
    border:none;
    border-radius:16px;
    background:#e5e7eb;
    font-weight:bold;
    cursor:pointer;
}
.table-bar button.active{
    background:#6a11cb;
    color:white;
}

/* MENU GRID */
.menu-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:16px;
}
.card{
    background:white;
    border-radius:18px;
    box-shadow:0 6px 16px rgba(0,0,0,.1);
    overflow:hidden;
    cursor:pointer;
    transition:.3s;
}
.card:hover{transform:translateY(-6px)}
.card img{width:100%;height:120px}
.card-body{padding:10px}
.price{color:#6a11cb;font-weight:bold}

/* ORDER */
.order{
    background:white;
    padding:20px;
    display:flex;
    flex-direction:column;
}
.order h3{text-align:center}
.order-list{flex:1;overflow:auto}
.order-item{
    display:flex;
    justify-content:space-between;
    margin-bottom:8px;
}
.qty{
    display:flex;
    gap:4px;
}
.qty button{
    border:none;
    background:#ddd;
    padding:4px 8px;
    border-radius:6px;
    cursor:pointer;
}
.remove{color:red;cursor:pointer}

.total{
    font-size:18px;
    font-weight:bold;
    margin:10px 0;
}
.pay{
    padding:14px;
    border:none;
    border-radius:16px;
    background:#27ae60;
    color:white;
    font-size:16px;
    cursor:pointer;
}
</style>
</head>

<body>

<div class="container">

<!-- SIDEBAR -->
<div class="sidebar">
    <h2>☕ CAFREE</h2>
    <button onclick="location.href='us06-them-mon-moi.html'">Thêm món</button>
    <button onclick="location.href='danh-sach-ban.html'">Bàn</button>
    <button onclick="location.href='giao-dien-dang-nhap.html'">Cài đặt</button>
    <button onclick="location.href='login-check.html'">Đăng xuất</button>
</div>


<!-- MENU -->
<div class="menu">
    <div class="menu-header">
        <h3>Menu quán</h3>

        <!-- DANH SÁCH BÀN -->
        <div class="table-bar">
            <button onclick="selectTable(this)">B1</button>
            <button onclick="selectTable(this)">B2</button>
            <button onclick="selectTable(this)">B3</button>
            <button onclick="selectTable(this)">B4</button>
            <button onclick="selectTable(this)">B5</button>
        </div>
    </div>

    <div class="menu-grid">
        <div class="card" onclick="addItem('Cà phê đen',25000)"><img src="images/cafe-den.jpg" alt="Cà phê đen"><div class="card-body"><b>Cà phê đen</b><div class="price">25.000 đ</div></div></div>
        <div class="card" onclick="addItem('Cà phê sữa',28000)"><img src="images/cafe-sua.jpg" alt="Cà phê sữa"><div class="card-body"><b>Cà phê sữa</b><div class="price">28.000 đ</div></div></div>
        <div class="card" onclick="addItem('Bạc xỉu',30000)"><img src="images/bac-xiu.jpg" alt="Bạc xỉu"><div class="card-body"><b>Bạc xỉu</b><div class="price">30.000 đ</div></div></div>
        <div class="card" onclick="addItem('Latte',35000)"><img src="images/latte.jpg" alt="Latte"><div class="card-body"><b>Latte</b><div class="price">35.000 đ</div></div></div>
        <div class="card" onclick="addItem('Cappuccino',38000)"><img src="images/cappuccino.jpg" alt="Cappuccino"><div class="card-body"><b>Cappuccino</b><div class="price">38.000 đ</div></div></div>
        <div class="card" onclick="addItem('Trà đào',35000)"><img src="images/tra-dao.jpg" alt="Trà đào"><div class="card-body"><b>Trà đào</b><div class="price">35.000 đ</div></div></div>
        <div class="card" onclick="addItem('Trà chanh',30000)"><img src="images/tra-chanh.jpg" alt="Trà chanh"><div class="card-body"><b>Trà chanh</b><div class="price">30.000 đ</div></div></div>
        <div class="card" onclick="addItem('Trà sữa',40000)"><img src="images/tra-sua.jpg" alt="Trà sữa"><div class="card-body"><b>Trà sữa</b><div class="price">40.000 đ</div></div></div>
        <div class="card" onclick="addItem('Trà sữa trân châu',45000)"><img src="images/tra-sua-tran-chau.jpg" alt="Trà sữa trân châu"><div class="card-body"><b>Trà sữa trân châu</b><div class="price">45.000 đ</div></div></div>
        <div class="card" onclick="addItem('Sinh tố xoài',45000)"><img src="images/sinh-to-xoai.jpg" alt="Sinh tố xoài"><div class="card-body"><b>Sinh tố xoài</b><div class="price">45.000 đ</div></div></div>
        <div class="card" onclick="addItem('Smoothie dâu',45000)"><img src="images/smoothie-dau.jpg" alt="Smoothie dâu"><div class="card-body"><b>Sinh tố dâu</b><div class="price">45.000 đ</div></div></div>
        <div class="card" onclick="addItem('Nước cam',35000)"><img src="images/nuoc-ep-cam.jpg" alt="Nước ép cam"><div class="card-body"><b>Nước cam</b><div class="price">35.000 đ</div></div></div>

    </div>
</div>

<!-- ORDER -->
<div class="order">
    <h3>Hóa đơn</h3>
    <div id="orderList" class="order-list"></div>
    <div id="total" class="total">Tổng: 0 đ</div>
    <button class="pay" onclick="pay()">THANH TOÁN</button>
</div>

</div>

<script>
let currentTable=null;
let orders={};

function selectTable(btn){
    document.querySelectorAll(".table-bar button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    currentTable=btn.innerText;
    orders={};
    render();
}

function addItem(name,price){
    if(!currentTable){
        alert("Vui lòng chọn bàn trước!");
        return;
    }
    if(!orders[name]) orders[name]={price,qty:0};
    orders[name].qty++;
    render();
}

function render(){
    let html="",total=0;
    for(let k in orders){
        let o=orders[k];
        total+=o.qty*o.price;
        html+=`
        <div class="order-item">
            <div>
                <b>${k}</b>
                <div class="qty">
                    <button onclick="changeQty('${k}',-1)">-</button>
                    ${o.qty}
                    <button onclick="changeQty('${k}',1)">+</button>
                    <span class="remove" onclick="removeItem('${k}')">✖</span>
                </div>
            </div>
            <span>${(o.qty*o.price).toLocaleString()} đ</span>
        </div>`;
    }
    document.getElementById("orderList").innerHTML=html;
    document.getElementById("total").innerText="Tổng: "+total.toLocaleString()+" đ";
}

function changeQty(name,delta){
    orders[name].qty+=delta;
    if(orders[name].qty<=0) delete orders[name];
    render();
}
function removeItem(name){
    delete orders[name];
    render();
}
function pay(){
    if(!currentTable){
        alert("Chưa chọn bàn!");
        return;
    }
    alert("Thanh toán thành công cho "+currentTable);
    orders={};
    render();
}
</script>

</body>
</html>
