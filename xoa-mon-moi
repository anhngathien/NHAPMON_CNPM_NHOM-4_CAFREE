<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cafree - Edit Item</title>
  <style>
    :root{--blue:#1e88e5;--light:#f3f6f8;--panel:#ffffff;--accent:#00b894;--muted:#9aa6b2;--card:#ffffff;--price:#0b63a6;--shadow:0 6px 18px rgba(22,40,60,0.08);font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#eef6fb 0%, #fbfdff 100%)}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .panel{width:920px;background:var(--panel);border-radius:14px;box-shadow:var(--shadow);display:flex;overflow:hidden}

    /* left order */
    .left{width:360px;padding:18px;border-right:1px solid #f1f5f9}
    .brand{display:flex;gap:12px;align-items:center;margin-bottom:12px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--blue),#5aa9f8);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    h1{font-size:18px;margin:0}
    .order-list{margin-top:12px}
    .order-item{display:flex;gap:12px;align-items:center;padding:10px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfcfd);margin-bottom:10px}
    .qty{width:36px;height:36px;border-radius:8px;background:#f0f5f9;display:flex;align-items:center;justify-content:center;font-weight:700}
    .item-body{flex:1}
    .item-title{font-weight:800}
    .item-sub{color:var(--muted);font-size:13px}
    .edit-btn{background:transparent;border:0;color:var(--blue);cursor:pointer;font-weight:700}

    /* right menu (just preview) */
    .right{flex:1;padding:18px}
    .muted{color:var(--muted)}

    /* modal edit */
    .modal-back{position:fixed;inset:0;background:rgba(10,20,30,0.35);display:flex;align-items:center;justify-content:center;z-index:40}
    .modal{width:560px;background:var(--panel);border-radius:12px;padding:18px;box-shadow:0 14px 40px rgba(10,20,40,0.18)}
    .modal-header{display:flex;justify-content:space-between;align-items:center}
    .modal-body{margin-top:12px}
    .row{display:flex;gap:10px;align-items:center;margin-bottom:10px}
    .label{width:110px;color:var(--muted);font-weight:700}
    .input,textarea,select{flex:1;padding:10px;border-radius:8px;border:1px solid #eef3f7;background:#fbfdff}
    textarea{min-height:86px}
    .qty-control{display:flex;gap:8px;align-items:center}
    .btn{padding:10px 14px;border-radius:8px;border:0;cursor:pointer;font-weight:800}
    .btn.primary{background:var(--blue);color:white}
    .btn.ghost{background:transparent;border:1px solid #e6eef9}

    /* small helper style */
    .tags{display:flex;gap:8px;flex-wrap:wrap}
    .tag{background:#f0fbf6;color:#047857;padding:6px 10px;border-radius:999px;font-weight:700}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <aside class="left">
        <div class="brand"><div class="logo">CF</div><div><h1>Cafree</h1><div class="muted">Order - Sửa món</div></div></div>

        <div class="order-list" id="orderList">
          <!-- items injected -->
        </div>
      </aside>

      <main class="right">
        <h2>Danh sách món (chỉ phục vụ xem trong demo)</h2>
        <p class="muted">Nhấn <strong>SỬA</strong> ở một món để mở giao diện sửa — giao diện sửa giống style Thêm món.</p>
        <div style="height:18px"></div>
        <div class="tags" id="tags"></div>
      </main>
    </div>

    <!-- modal (hidden) -->
    <div id="modal" class="modal-back" style="display:none">
      <div class="modal" role="dialog" aria-modal="true">
        <div class="modal-header">
          <div><strong id="m-title">Sửa món</strong><div class="muted" id="m-sub">Trà sữa xoài</div></div>
          <button id="closeBtn" class="btn ghost">Đóng</button>
        </div>
        <div class="modal-body">
          <div class="row"><div class="label">Số lượng</div><div class="qty-control"><button id="dec" class="btn">−</button><input id="qty" class="input" type="number" min="1" value="1" style="width:100px;text-align:center"/><button id="inc" class="btn">+</button></div></div>

          <div class="row"><div class="label">Ghi chú</div><textarea id="note" placeholder="Ví dụ: ít đá, không đường"></textarea></div>

          <div class="row"><div class="label">Size</div><select id="size"><option value="M">M (thường)</option><option value="L">L (lớn)</option></select></div>

          <div class="row"><div class="label">Tùy chọn</div><div style="flex:1"><label><input type="checkbox" id="add-bubble"/> Thêm trân châu (+5000)</label></div></div>

          <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:14px"><button id="deleteBtn" class="btn" style="background:#ffeeef;color:#c53030">Xóa</button><button id="saveBtn" class="btn primary">Lưu thay đổi</button></div>
        </div>
      </div>
    </div>
  </div>

<script>
  // sample order data
  const order = [
    {id:1,name:'Trà sữa xoài',price:35000,qty:2,note:'ít đá'},
    {id:2,name:'Trà sữa matcha',price:35000,qty:1,note:''},
    {id:3,name:'Sữa tươi đường nâu',price:35000,qty:1,note:'no sugar'}
  ];

  const orderList = document.getElementById('orderList');
  const modal = document.getElementById('modal');
  const mTitle = document.getElementById('m-title');
  const mSub = document.getElementById('m-sub');
  const qtyInput = document.getElementById('qty');
  const noteInput = document.getElementById('note');
  const sizeSelect = document.getElementById('size');
  const addBubble = document.getElementById('add-bubble');
  let editingId = null;

  function renderOrder(){
    orderList.innerHTML='';
    order.forEach(it=>{
      const el = document.createElement('div'); el.className='order-item';
      el.innerHTML = `<div class="qty">${it.qty}</div><div class="item-body"><div class="item-title">${it.name}</div><div class="item-sub">${it.price.toLocaleString()} đ · ${it.note||'Không'}</div></div><div><button class="edit-btn" data-id="${it.id}">SỬA</button></div>`;
      orderList.appendChild(el);
    });

    // bind edit
    orderList.querySelectorAll('.edit-btn').forEach(b=>b.onclick = ()=>openEdit(+b.dataset.id));
  }

  function openEdit(id){
    const it = order.find(o=>o.id===id); if(!it) return;
    editingId = id;
    mTitle.textContent = 'Sửa món';
    mSub.textContent = it.name;
    qtyInput.value = it.qty;
    noteInput.value = it.note||'';
    addBubble.checked = false;
    sizeSelect.value = 'M';
    modal.style.display = 'flex';
  }

  function closeModal(){ modal.style.display='none'; editingId=null; }
  document.getElementById('closeBtn').onclick = closeModal;
  document.getElementById('inc').onclick = ()=>{ qtyInput.value = Number(qtyInput.value)+1 }
  document.getElementById('dec').onclick = ()=>{ if(Number(qtyInput.value)>1) qtyInput.value = Number(qtyInput.value)-1 }

  document.getElementById('saveBtn').onclick = ()=>{
    if(editingId==null) return; const it = order.find(o=>o.id===editingId); it.qty = Number(qtyInput.value); it.note = noteInput.value.trim(); // apply extra options if needed
    closeModal(); renderOrder();
  }

  document.getElementById('deleteBtn').onclick = ()=>{
    if(!confirm('Xác nhận xóa món này khỏi order?')) return; const idx = order.findIndex(o=>o.id===editingId); if(idx>=0) order.splice(idx,1); closeModal(); renderOrder();
  }

  // render tags sample
  const tags = ['Tất cả','Đồ uống','Đồ ăn','Combo','Hot'];
  const tagsEl = document.getElementById('tags'); tags.forEach(t=>{const d=document.createElement('div');d.className='tag';d.textContent=t;tagsEl.appendChild(d)});

  renderOrder();
</script>
</body>
</html>
